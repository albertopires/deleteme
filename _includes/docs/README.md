# Multi-homed File Transfer Protocol #

MhFtp is a tool to allow file transfer over a multi-homed host, that is, a host with more than one Internet link, using one or more links, summing up all bandwidths.

## How it works ##
Basically it breaks a file into a number of parts (Chunks), open one connection per link, and start transferring each chunk separately. All information about each chunk, like its size, md5sum, status (DOWNLOADING, PENDING, ERROR) and complete file md5, are stored in a metadata file, using a **.mdata** extension, for example, if you download a file named **archive.tar**, an **archive.tar.mdata** will be stored in your current directory.

This metadata file will be generated by the server and sent to the client on first time transfer and will be stored on the client side. Later this .mdata file may be used to resume transmission, check for chunk errors, and retransmit single  failed chunks.

As of this version, the chunk size is fixed in 1MB, but very soon it will be configurable. Although the size of 1MB suits a good range of file sizes, for larger file the metadata file me became too big.

## Before you ask ##
It could be a **FAQ**, but so far there are not frequently asked questions, or any asked question for that matter, but, I few things you should know:

* Only the download option is implemented.
* Yes, I'll implement to upload, meanwhile you can already use it for download.
* To take advantage of n links, the server must be running on the multi-homed host.
* Your multi-homed must be configured properly. I'm talking about symmetric routing. If you don't know what it is, take a look at this [howto](http://www.microhowto.info/howto/ensure_symmetric_routing_on_a_server_with_multiple_default_gateways.html)

## Compiling ##

As of this moment, this version is tested on 64bit Linux and requires:

* GNU g++ 4.8
* libssl-dev 1.0.1f
* Electric Fence (optional)

It's possible to compile MhFtp on older version of g++, although it may necessary to comment the compile options **-pedantic** and **-std=c++11** on your Makefile.

``CFLAGS=-Wall -g #-pedantic -std=c++11``

and then, just run make.

## Usage ##
After a successful build, there will be the following binaries:

* mhftp
* mhclient
* mhstatus
* initFile

***mhftp*** is the server program. There are two options, -v : version and -p port. The default port is 5000.

***mhclient*** is the client program. Example:

`
user@server:~/git/mhftp (master)$ ./mhclient archive.tar 192.168.120.10:5000 172.16.30.2:5000
`


## Contributing ##
For now it's just me, so I'll try to keep it simple. Basically **master** branch
will have the latest (hopefully stable) version, and there will be a
 **next** branch where I'll work on upcoming features.

Contributing is not only about code. Besides a pull request, you can help by testing,
documenting, sending money, beer, etc...

About code contribution, I'll kindly ask to stick to the actual code style. I decided to use the Google Code Style. I know people have different options and I respect them all, but, code style is about readability and that can not be achieved without consistency. So there can be only one. And Google has [cpplint](https://github.com/google/styleguide/tree/gh-pages/cpplint) (thanks Google), that helps a lot to keep a clean code.

## Contributing - Documentation ##
Some of may have noticed a **gh-pages** branch. It's used by github to publish a web page and it has some nice features. But what you need to know is that I'm just using a [Jekyll template](http://jekyllrb.com/) to render my README.md to a nice page. So all you need to do is just edit the README.md file in the master branch and send a pull request. No need go through the **gh-pages** branch, unless, of course, you found something wrong with the template itself.


So, fork it and have fun.
